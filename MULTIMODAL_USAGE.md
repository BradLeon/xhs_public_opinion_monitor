# 🎬 多模态品牌分析器使用指南

## 📖 概述

基于Google Gemini Pro的多模态品牌分析器，支持对小红书笔记中的**文本、图片和视频内容**进行智能分析，准确识别品牌信息、产品SPU和情感倾向。

## 🚀 核心功能

### 1. **多模态内容理解**
- **文本分析**: 识别标题和描述中的品牌、产品和情感
- **图片理解**: 分析图片中的品牌标识、产品包装、使用场景
- **视频理解**: 理解视频内容中的品牌展示和产品演示
- **复合分析**: 综合文本、图片、视频的多维度信息

### 2. **智能品牌识别**
- 精确提取品牌名称和产品SPU
- 支持中英文混合品牌名
- 识别图片/视频中的视觉品牌信息
- 品牌标准化和归一化处理

### 3. **情感分析增强**
- 文本情感判断
- 图片场景情感理解
- 视频表达情感分析
- 综合多模态情感评分

## 🔧 使用方法

### 方法1: 命令行直接运行

```bash
# 运行多模态分析
python -m xhs_public_opinion.main multimodal
```

### 方法2: 独立批处理脚本

```bash
# 运行专门的多模态批处理器
python multimodal_batch_processor.py
```

### 方法3: 测试脚本验证

```bash
# 测试多模态分析器功能
python test_multimodal.py
```

## 📊 处理流程

```
数据库读取 → 内容分类 → 多模态分析 → 结果写入
     ↓           ↓           ↓           ↓
   批量数据   按类型分组   Gemini Pro   结构化存储
     ↓           ↓           ↓           ↓
   未处理     文本/图片/    智能理解     analysis_result
   笔记      视频/复合      多模态       表更新
```

### 具体分类处理

1. **📝 纯文本内容**: 使用文本分析能力
2. **🖼️ 含图片内容**: 文本+图片联合分析
3. **🎬 含视频内容**: 文本+视频内容理解
4. **🎭 复合内容**: 文本+图片+视频全方位分析

## 🛠️ 配置要求

### 环境变量设置
```bash
# .env 文件
SEO_SUPABASE_URL=your_supabase_url
SEO_SUPABASE_ANON_KEY=your_supabase_anon_key
OPENROUTER_API_KEY=your_openrouter_api_key
```

### 依赖安装
```bash
# 安装OpenAI SDK (用于OpenRouter调用)
pip install openai

# 或在conda环境中
conda activate crewai-env
pip install openai
```

## 📈 输出格式

多模态分析器输出标准化的JSON格式：

```json
{
  "brand_list": ["馥绿德雅", "兰蔻", "雅诗兰黛"],
  "spu_list": ["丰盈蓬松洗发水", "小黑瓶精华", "眼霜"],
  "emotion_dict": {
    "馥绿德雅": "positive",
    "兰蔻": "positive", 
    "雅诗兰黛": "neutral"
  },
  "evaluation_dict": {
    "馥绿德雅": ["好用", "推荐", "效果棒"],
    "兰蔻": ["不错", "质量好"],
    "雅诗兰黛": ["一般", "可以"]
  },
  "confidence_score": 0.85,
  "multimodal_analysis": {
    "text_brands": ["馥绿德雅"],
    "image_brands": ["兰蔻", "雅诗兰黛"],
    "video_brands": [],
    "visual_elements": ["产品包装", "使用场景", "品牌logo"]
  }
}
```

## 🎯 优势特点

### 相比传统文本分析
- **✅ 信息更全面**: 捕获图片/视频中的品牌信息
- **✅ 准确性更高**: 多模态交叉验证，减少误识别
- **✅ 场景理解**: 理解使用场景和产品展示方式
- **✅ 视觉品牌识别**: 识别logo、包装等视觉元素

### 技术优势
- **🤖 先进模型**: 基于Google Gemini Pro多模态能力
- **🔄 批量处理**: 支持大规模数据并行处理
- **📊 智能分类**: 按内容类型优化处理策略
- **💾 可靠存储**: 结果自动写入数据库

## 🔍 使用示例

### 示例1: 护肤品评测笔记
```
输入: 标题="兰蔻小黑瓶试用心得" + 产品图片 + 使用视频
输出: 品牌[兰蔻], SPU[小黑瓶精华], 情感[positive], 场景[护肤评测]
```

### 示例2: 多品牌对比笔记
```
输入: 多个产品图片 + 对比视频 + 详细文字描述
输出: 多品牌识别 + 对比情感分析 + 产品差异理解
```

## ⚠️ 注意事项

1. **API成本**: Gemini Pro调用有成本，建议合理控制批次大小
2. **图片质量**: 图片清晰度影响品牌识别准确率
3. **网络稳定**: 需要稳定的网络环境访问OpenRouter API
4. **处理时间**: 多模态分析比纯文本分析耗时更长

## 🎨 未来扩展

- **🔊 音频理解**: 支持视频中的语音转文字分析
- **🎯 细粒度识别**: 更精准的产品型号和规格识别
- **📱 实时分析**: 支持实时多模态内容分析
- **🌍 多语言**: 扩展更多语言的多模态理解能力

---

**🚀 立即开始使用多模态分析，释放图片和视频中的品牌洞察价值！** 